<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="js/paperjs-v0.10.2/dist/paper-full.js"></script>

    <style>
        html,
        body {
            margin: 0;
            overflow: hidden;
            height: 100%;
            background: black;
        }
        canvas[resize]{
            width:100%;
            height:100%;
        }
    </style>

    <!-- Define inlined PaperScript associate it with myCanvas -->
    <script type="text/paperscript" canvas="myCanvas">

        // Create some nodes
        var nodes = [];
		nodes[0] = createNode(100,100, 50, 0, '#7BBC9B'); //green
		nodes[1] = createNode(400,100, 40, .5, '#A43234'); //red
		nodes[2] = createNode(250,250, 45, 1, '#FBC23D'); //yellow

        // Clone a node, move it, and change its color
		nodes[3] = nodes[2].clone();
		nodes[3].position.x += 300;
		setNodeHue(nodes[3], 200); // blue

        // Draw lines between some nodes
		connectNodes(0, 1);
		connectNodes(0, 2);
		connectNodes(2, 3);
		connectNodes(1, 3);



        // ## Drawing Functions ## //

        // Change a node's hue. Hue is from 0 to 360.
		function setNodeHue(node, h) {
            node.children[0].fillColor.hue = h;
            node.children[0].shadowColor.hue = h;
		    node.children[1].fillColor.hue = h;
            node.children[2].fillColor.hue = h;
		}

		function connectNodes(n1, n2) {
            var path = new Path();
            path.sendToBack();
            path.add(nodes[n1].position);
            path.add(nodes[n2].position);
            path.strokeWidth = 10;
            path.strokeColor = '#154811';
		}


		function createNode(x, y, r, d, c) {
            var w = 15; // border width

            var outerNode = new Path.Circle({
                center: new Point(x,y),
                radius: r + w,
                fillColor: new Color(c),
                shadowColor: c,
                shadowBlur: 80,
                shadowOffset: new Point(0, 0)
            });
            outerNode.shadowColor.brightness = 1;
            outerNode.shadowColor.saturation = 1;

            var innerNode = new Path.Circle({
                center: new Point(x,y),
                radius: r,
                fillColor: new Color(c)
            });
            innerNode.fillColor.brightness += .07;
            innerNode.fillColor.saturation -= .1;

            var arcNode = createArc(x, y, r + w, c);
            var groupNode = new Group([outerNode, innerNode, arcNode]);
            return groupNode;
		}

		function createArc(x, y, r, c) {
		    // Draw the outside curve of a half-circle
		    var start = new Point(x, y-r);
            var through = new Point(x-r, y);
            var to = new Point(x, y+r);
            var arcNode = Path.Arc(start, through, to);
            // Draw the flat line
            arcNode.add(new Point(x, y));
            arcNode.add(new Point(x, y-r));
            arcNode.fillColor = c;
            arcNode.fillColor.alpha = 0.3;
            arcNode.blendMode = 'multiply';
            arcNode.rotate(45, new Point(x, y));
            return arcNode;
        }
	</script>
</head>

<body>
<canvas id="myCanvas" resize></canvas>
</body>
</html>